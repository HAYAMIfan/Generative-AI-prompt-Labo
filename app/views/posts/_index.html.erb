<div class="<%= line ? 'card-line overflow-auto' : 'card-box scroll-list jscroll' %>" style="max-width: 1450px">
  <% posts.each do |post| %>
    <%= link_to post_path(post) do %>
    <!--カード一つ一つ-->
      <div class="card">
        <div class="card-body px-2 pb-0">
          <h5 class="card-title post-link" style="height: 100px"><%= post.title.truncate(45, omission: "...") %></h5>
          <!--投稿者情報を表示する-->
          <%= render "posts/author", post: post %>
          <div class="d-flex align-items-center">
            <!--いいね！ボタン-->
            <div class="favorite-btn_<%= post.id %>">
              <%= render "favorites/favorite-btn", post: post %>
            </div>
            <p class="date ml-auto"><%= "投稿日時："+post.created_at.strftime("%Y年%m月%d日 %H:%M") %></p>
          </div>
        </div>
      </div>
    <% end %>
  <% end %>
  <%= paginate posts %>
</div>
    
<script>
  // 無限スクロールの処理
$(window).on('scroll', function() {
    scrollHeight = $(document).height();
    scrollPosition = $(window).height() + $(window).scrollTop();
    if ( (scrollHeight - scrollPosition) / scrollHeight <= 0.05) {
          $('.jscroll').jscroll({
            contentSelector: '.scroll-list',
            nextSelector: 'span.next:last a'
          });
    }
});
</script>